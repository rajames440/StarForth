<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>MLmon</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="./mlton.css">

</head>
<body class="article">
<div id="mlton-header">
<div id="mlton-header-text">
<h2>
<a href="./Home">
MLton
20241230
</a>
</h2>
</div>
</div>
<div id="header">
<h1>MLmon</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>An <code>mlmon.out</code> file records dynamic <a href="Profiling">profiling</a> counts.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_file_format">File format</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An <code>mlmon.out</code> file is a text file with a sequence of lines.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The string <code>MLton prof</code>.</p>
</li>
<li>
<p>The string <code>alloc</code>, <code>count</code>, or <code>time</code>, depending on the kind
of profiling information, corresponding to the command-line argument
supplied to <code>mlton -profile</code>.</p>
</li>
<li>
<p>The string <code>current</code> or <code>stack</code> depending on whether profiling
data was gathered for only the current function (the top of the stack)
or for all functions on the stack.  This corresponds to whether the
executable was compiled with <code>-profile-stack false</code> or <code>-profile-stack
true</code>.</p>
</li>
<li>
<p>The magic number of the executable.</p>
</li>
<li>
<p>The number of non-gc ticks, followed by a space, then the number of
GC ticks.</p>
</li>
<li>
<p>The number of (split) functions for which data is recorded.</p>
</li>
<li>
<p>A line for each (split) function with counts.  Each line contains an
integer count of the number of ticks while the function was current.
In addition, if stack data was gathered (<code>-profile-stack true</code>), then
the line contains two additional tick counts:</p>
<div class="ulist">
<ul>
<li>
<p>the number of ticks while the function was on the stack.</p>
</li>
<li>
<p>the number of ticks while the function was on the stack and a GC
was performed.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The number of (master) functions for which data is recorded.</p>
</li>
<li>
<p>A line for each (master) function with counts.  The lines have the
same format and meaning as with split-function counts.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="mlton-footer">
<div id="mlton-footer-text">
<div>
Last updated Thu Oct 21 15:53:06 2021 -0400 by Matthew Fluet.
<a href="https://github.com/MLton/mlton/commits/master/doc/guide/src/MLmon.adoc">Log</a>
<a href="https://github.com/MLton/mlton/edit/master/doc/guide/src/MLmon.adoc">Edit</a>
</div>
</div>
</body>
</html>