\documentclass[11pt,a4paper]{book}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{isabelle}
\usepackage{isabellesym}
\usepackage{latexsym}
\usepackage{textcomp}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage[only,bigsqcap]{stmaryrd}
\usepackage{pdfsetup}

\usepackage{tocloft}
\setlength{\cftsubsecnumwidth}{3.5em}
\cftsetpnumwidth{2em}
\cftsetrmarg{3em}
\renewcommand\cftchapafterpnum{\vskip5pt}
\addtolength{\cftsubsecindent}{-1\cftsecindent}% Reduce indent for \subsection
\setlength{\cftsecindent}{0pt}% Remove indent for \section
%\renewcommand{\numberline}[1]{#1~}% More compact but uneven indentation

\urlstyle{rm}
\isabellestyle{literalunderscore}
\pagestyle{myheadings}

\raggedbottom

\begin{document}

\title{Analysis}
\maketitle

\tableofcontents

\begin{center}
  \includegraphics[height=\textheight]{session_graph}
\end{center}

\newpage

\renewcommand{\setisabellecontext}[1]{\markright{\href{#1.html}{#1.thy}}}

\parindent 0pt\parskip 0.5ex
\input{session}

\pagestyle{headings}
\bibliographystyle{abbrv}
\bibliography{root}
\nocite{dummy}

\end{document}
